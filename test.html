<!DOCTYPE html>
<html lang="zh-cmn-hans">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge, chrome=1">
        <title>WeixinJSBridge Test</title>
    </head>
    <body>
        <script> 

function is_weixin() {
    if (/MicroMessenger/i.test(navigator.userAgent)) {
        return true
    } else {
        return false
    }
}
function is_android() {
    var a = navigator.userAgent.toLowerCase();
    if (a.match(/(Android|SymbianOS)/i)) {
        return true
    } else {
        return false
    }
}
function is_ios() {
    var a = navigator.userAgent.toLowerCase();
    if (/iphone|ipad|ipod/.test(a)) {
        return true
    } else {
        return false
    }
}

function weixinShareTimeline(title,desc,link,imgUrl){  
    WeixinJSBridge.invoke('shareTimeline',{  
        "img_url":imgUrl,  
        //"img_width":"640",  
        //"img_height":"640",  
        "link":link,  
        "desc": desc,  
        "title":title  
    });   
}

function onAutoinit() {
    window.WeixinJSBridge = WeixinJSBridge;
    weixinShareTimeline('js bridge test','this is a test','http://yubolun.com','https://www.baidu.com/s?wd=%E4%BB%8A%E6%97%A5%E6%96%B0%E9%B2%9C%E4%BA%8B&tn=SE_PclogoS_8whnvm25&sa=ire_dl_gh_logo')
}
if (is_weixin()) {
    if (typeof WeixinJSBridge == "undefined") {
        if (document.addEventListener) {
            document.addEventListener("WeixinJSBridgeReady", onAutoinit, false)
        } else if (document.attachEvent) {
            document.attachEvent("WeixinJSBridgeReady", onAutoinit);
            document.attachEvent("onWeixinJSBridgeReady", onAutoinit)
        }
    } else {
        onAutoinit()
    }
}
</script>
    </body>
</html>
